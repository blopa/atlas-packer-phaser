(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{s5gv:function(l,n,t){"use strict";t.r(n);var u=t("CcnG"),e=function(){},o=t("pMnS"),a=t("Ip0R"),i=t("gIcY"),r=t("sRS0"),s=t("sX7g"),c=function(){function l(){this.atlasPuro=[]}return l.prototype.generateAtlas=function(l){var n=this;this.atlasPuro=[],l.length>=1&&(l.map(function(l,t,u){n.atlasPuro[t]=[],l.map(function(l,u){n.atlasPuro[t][u]={filename:l.name,frame:{x:void 0===n.atlasPuro[t][u-1]?0:n.atlasPuro[t][u-1].frame.x+n.atlasPuro[t][u-1].frame.w,y:void 0===n.atlasPuro[t-1]?0:n.atlasPuro[t-1][u].frame.y+n.atlasPuro[t-1][u].frame.h,w:l.width,h:l.height},anchor:{x:.5,y:.5}}})}),this.atlasJson={frames:Object(s.b)(this.atlasPuro)})},l.prototype.getAtlas=function(){return this.atlasJson},l.ngInjectableDef=u.Q({factory:function(){return new l},token:l,providedIn:"root"}),l}(),p=t("fDnD"),g=t("JEAp"),m=t("db6O"),f=t("m7g1"),d=function(){function l(l,n,t,u,e,o){this.imgFilesService=l,this.atlasJsonService=n,this.localStorage=t,this.router=u,this.animatorService=e,this.elementRef=o,this.nombreSprite="Atlas name",this.spritePerRow=1,this.zoomScale=1,this.spritePerRow=this.imgFilesService.getSpritesheetRow()}return l.prototype.ngOnInit=function(){this.elementRef.nativeElement.ownerDocument.body.style.backgroundColor="#1A2226",this.elementOutput=_$("#output"),this.imagesFiles=multiRE(this.imgFilesService.getImages(),this.spritePerRow),this.atlasJsonService.generateAtlas(this.imagesFiles),this.scrollBar()},l.prototype.uploadAddFilesMulti=function(l){var n=this,t=Array.from(l.target.files),u=[];t.map(function(l,e){return o=n,void 0,i=function(){var n;return function(l,n){var t,u,e,o,a={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,u&&(e=u[2&o[0]?"return":o[0]?"throw":"next"])&&!(e=e.call(u,o[1])).done)return e;switch(u=0,e&&(o=[0,e.value]),o[0]){case 0:case 1:e=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,u=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(e=(e=a.trys).length>0&&e[e.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!e||o[1]>e[0]&&o[1]<e[3])){a.label=o[1];break}if(6===o[0]&&a.label<e[1]){a.label=e[1],e=o;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(o);break}e[2]&&a.ops.pop(),a.trys.pop();continue}o=n.call(l,a)}catch(l){o=[6,l],u=0}finally{t=e=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}(this,function(o){switch(o.label){case 0:return[4,readMultipleFiles(l)];case 1:return n=o.sent(),u.push(n),t.length-1===e&&(this.imgFilesService.insertNewSprites(u),this.ngOnInit()),[2]}})},new((a=void 0)||(a=Promise))(function(l,n){function t(l){try{e(i.next(l))}catch(l){n(l)}}function u(l){try{e(i.throw(l))}catch(l){n(l)}}function e(n){n.done?l(n.value):new a(function(l){l(n.value)}).then(t,u)}e((i=i.apply(o,[])).next())});var o,a,i})},l.prototype.zoom=function(l){this.zoomScale="zoomIn"===l?this.zoomScale+1>=4?4:this.zoomScale+1:this.zoomScale-1<=1?1:this.zoomScale-1;var n=(this.elementOutput.offsetWidth*this.zoomScale-_$(".outputIMG").offsetWidth)/4,t=(this.elementOutput.offsetHeight*this.zoomScale-_$(".outputIMG").offsetHeight)/4,u=this.elementOutput.offsetWidth*this.zoomScale>_$(".outputIMG").offsetWidth?"scale("+this.zoomScale+")\n            translate("+n+"px, "+t+"px)":"scale("+this.zoomScale+")";this.elementOutput.style.transform=u,this.scrollBar()},l.prototype.scrollBar=function(){new PerfectScrollbar(".outputIMG").update()},l.prototype.deleteSprite=function(l){this.imgFilesService.deleteOneSprite(l),this.ngOnInit()},l.prototype.generatePNGJSON=function(){var l=this,n=new p,t=clearString(this.nombreSprite),u=this.elementOutput.getBoundingClientRect().width/this.elementOutput.offsetWidth;this.elementOutput.style.transform="scale(1)";var e=JSON.stringify(this.atlasJsonService.getAtlas(),null,"    ");n.file(t+"_atlas.json",e),html2canvas(_$("#output"),{backgroundColor:"rgba(0, 0, 0, 0)"}).then(function(e){n.file(t+".png",e.toDataURL().replace("data:image/png;base64,",""),{base64:!0}),n.generateAsync({type:"blob"}).then(function(l){Object(g.saveAs)(l,"PP3.zip")}),l.elementOutput.style.transform="scale("+u+")"})},l.prototype.animate=function(){var l=this;swal({title:"\xbfEstas seguro?",text:"Saldr\xe1s de esta p\xe1gina, \xbfest\xe1s seguro?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, \xa1vamos a animar!",cancelButtonText:"Cancelar"}).then(function(n){n.value&&html2canvas(_$("#output"),{backgroundColor:"rgba(0, 0, 0, 0)"}).then(function(n){l.animatorService.setAtlas([{name:clearString(l.nombreSprite),spritesheet_array:l.imagesFiles,spritesheet:n.toDataURL(),atlas:l.atlasJsonService.getAtlas()}]),l.router.navigate(["animator"])})})},l}(),h=t("ZYCi"),b=u.La({encapsulation:0,styles:[["#output[_ngcontent-%COMP%]{outline:#000 solid 1px}#output[_ngcontent-%COMP%]   .col-gamma[_ngcontent-%COMP%]{display:flex}#output[_ngcontent-%COMP%]   span.content_box[_ngcontent-%COMP%]{display:flex;width:100%}#output[_ngcontent-%COMP%]   span.content_box[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{line-height:0}.logo-text[_ngcontent-%COMP%]{font-size:30px;color:var(--color-secondary)}.img-logo-nav[_ngcontent-%COMP%]{width:40px;height:40px}main[_ngcontent-%COMP%]{min-height:calc(100vh - 146px);color:#fff;font-family:pressStart;font-size:12px}.outputIMG[_ngcontent-%COMP%]{overflow:hidden}.btn-gamma-primary[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff}.btn-gamma-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-primary-hover)}.content-row-editor[_ngcontent-%COMP%]{min-height:calc(100vh - 122px)}.controls-border-right[_ngcontent-%COMP%]{border-right:1px solid var(--bg-dark-color)}.btn-styles[_ngcontent-%COMP%]{cursor:pointer;transition:1s}.btn-styles[_ngcontent-%COMP%]:hover{-webkit-transform:scale(1.2);transform:scale(1.2)}nav[_ngcontent-%COMP%]{font-family:point}footer[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]{color:#fff;height:60px;background-color:var(--bg-dark-color)}footer[_ngcontent-%COMP%]{font-family:pressStart}"]],data:{}});function v(l){return u.bb(0,[(l()(),u.Na(0,0,null,null,4,"span",[["class","content_box"],["ng-click","editarImage(img.name)"]],null,null,null,null,null)),u.Ma(1,278528,null,0,a.l,[u.r,u.k,u.B],{ngStyle:[0,"ngStyle"]},null),u.Xa(2,{width:0}),(l()(),u.Na(3,0,null,null,1,"div",[["class","box"]],null,null,null,null,null)),(l()(),u.Na(4,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],function(l,n){l(n,1,0,l(n,2,0,n.context.$implicit.width+"px"))},function(l,n){l(n,4,0,u.Pa(1,"",n.context.$implicit.result,""))})}function y(l){return u.bb(0,[(l()(),u.Na(0,0,null,null,2,"div",[["class","col-gamma"]],null,null,null,null,null)),(l()(),u.Ea(16777216,null,null,1,null,v)),u.Ma(2,278528,null,0,a.i,[u.M,u.J,u.q],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.context.$implicit)},null)}function S(l){return u.bb(0,[(l()(),u.Na(0,0,null,null,3,"nav",[["class","pr-5 d-flex justify-content-end align-items-center"]],null,null,null,null,null)),(l()(),u.Na(1,0,null,null,0,"img",[["class","img-logo-nav"],["src","./assets/img/logo.gif"]],null,null,null,null,null)),(l()(),u.Na(2,0,null,null,1,"span",[["class","logo-text ml-3"]],null,null,null,null,null)),(l()(),u.ab(-1,null,[" ATLAS PACKER PHASER 3 "])),(l()(),u.Na(4,0,null,null,48,"main",[["class","container-fluid"]],null,null,null,null,null)),(l()(),u.Na(5,0,null,null,47,"div",[["class","row content-row-editor"]],null,null,null,null,null)),(l()(),u.Na(6,0,null,null,41,"div",[["class","col-12 col-sm-12 col-md-3 controls-border-right py-5 order-2 order-md-1"]],null,null,null,null,null)),(l()(),u.Na(7,0,null,null,6,"div",[["class","form-group text-center"]],null,null,null,null,null)),(l()(),u.Na(8,0,null,null,1,"div",[["for","moreSprites"]],null,null,null,null,null)),(l()(),u.ab(-1,null,["Add more sprites"])),(l()(),u.Na(10,0,null,null,3,"div",[["class","fileUpload btn-input mr-4"]],null,null,null,null,null)),(l()(),u.Na(11,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Na(12,0,null,null,0,"img",[["class","btn-image-xs img-crisp"],["src","./assets/img/frame.png"]],null,null,null,null,null)),(l()(),u.Na(13,0,null,null,0,"input",[["class","upload"],["id","moreSprites"],["multiple",""],["title","Click to import sprite"],["type","file"]],null,[[null,"change"]],function(l,n,t){var u=!0;return"change"===n&&(u=!1!==l.component.uploadAddFilesMulti(t)&&u),u},null,null)),(l()(),u.Na(14,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),u.Na(15,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),u.Na(16,0,null,null,1,"label",[["for","nameSprite"]],null,null,null,null,null)),(l()(),u.ab(-1,null,["Sprite name"])),(l()(),u.Na(18,0,null,null,5,"input",[["class","form-control-file"],["id","nameSprite"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var e=!0,o=l.component;return"input"===n&&(e=!1!==u.Wa(l,19)._handleInput(t.target.value)&&e),"blur"===n&&(e=!1!==u.Wa(l,19).onTouched()&&e),"compositionstart"===n&&(e=!1!==u.Wa(l,19)._compositionStart()&&e),"compositionend"===n&&(e=!1!==u.Wa(l,19)._compositionEnd(t.target.value)&&e),"ngModelChange"===n&&(e=!1!==(o.nombreSprite=t)&&e),e},null,null)),u.Ma(19,16384,null,0,i.b,[u.B,u.k,[2,i.a]],null,null),u.Ya(1024,null,i.d,function(l){return[l]},[i.b]),u.Ma(21,671744,null,0,i.g,[[8,null],[8,null],[8,null],[6,i.d]],{model:[0,"model"]},{update:"ngModelChange"}),u.Ya(2048,null,i.e,null,[i.g]),u.Ma(23,16384,null,0,i.f,[[4,i.e]],null,null),(l()(),u.Na(24,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),u.Na(25,0,null,null,1,"label",[["for","spritePerRow"]],null,null,null,null,null)),(l()(),u.ab(-1,null,["Sprite per row"])),(l()(),u.Na(27,0,null,null,6,"input",[["class","form-control-file"],["id","spritePerRow"],["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var e=!0,o=l.component;return"input"===n&&(e=!1!==u.Wa(l,28)._handleInput(t.target.value)&&e),"blur"===n&&(e=!1!==u.Wa(l,28).onTouched()&&e),"compositionstart"===n&&(e=!1!==u.Wa(l,28)._compositionStart()&&e),"compositionend"===n&&(e=!1!==u.Wa(l,28)._compositionEnd(t.target.value)&&e),"change"===n&&(e=!1!==u.Wa(l,29).onChange(t.target.value)&&e),"input"===n&&(e=!1!==u.Wa(l,29).onChange(t.target.value)&&e),"blur"===n&&(e=!1!==u.Wa(l,29).onTouched()&&e),"ngModelChange"===n&&(e=!1!==(o.spritePerRow=t)&&e),"change"===n&&(e=!1!==o.ngOnInit()&&e),e},null,null)),u.Ma(28,16384,null,0,i.b,[u.B,u.k,[2,i.a]],null,null),u.Ma(29,16384,null,0,i.i,[u.B,u.k],null,null),u.Ya(1024,null,i.d,function(l,n){return[l,n]},[i.b,i.i]),u.Ma(31,671744,null,0,i.g,[[8,null],[8,null],[8,null],[6,i.d]],{model:[0,"model"]},{update:"ngModelChange"}),u.Ya(2048,null,i.e,null,[i.g]),u.Ma(33,16384,null,0,i.f,[[4,i.e]],null,null),(l()(),u.Na(34,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),u.Na(35,0,null,null,6,"div",[["class","form-group text-center"]],null,null,null,null,null)),(l()(),u.Na(36,0,null,null,1,"div",[["class","my-3"]],null,null,null,null,null)),(l()(),u.ab(-1,null,[" Zoom: "])),(l()(),u.Na(38,0,null,null,1,"span",[],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.zoom("zoomIn")&&u),u},null,null)),(l()(),u.Na(39,0,null,null,0,"img",[["alt","ZoomIn"],["class","btn-styles zoom-in"],["src","./assets/img/zoomIn.png"]],null,null,null,null,null)),(l()(),u.Na(40,0,null,null,1,"span",[["class","btn-zooms"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.zoom("zoomOut")&&u),u},null,null)),(l()(),u.Na(41,0,null,null,0,"img",[["alt","ZoomOut"],["class","btn-styles zoom-out"],["src","./assets/img/zoomOut.png"]],null,null,null,null,null)),(l()(),u.Na(42,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),u.Na(43,0,null,null,4,"div",[["class","form-group text-center"]],null,null,null,null,null)),(l()(),u.Na(44,0,null,null,1,"button",[["class","btn btn-gamma-primary"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.generatePNGJSON()&&u),u},null,null)),(l()(),u.Na(45,0,null,null,0,"img",[["alt","Save"],["src","./assets/img/save.png"]],null,null,null,null,null)),(l()(),u.Na(46,0,null,null,1,"button",[["class","btn btn-gamma-primary ml-3 disabled"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.animate()&&u),u},null,null)),(l()(),u.ab(-1,null,["Animate!"])),(l()(),u.Na(48,0,null,null,4,"div",[["class","col-12 col-sm-12 col-md-9 outputIMG d-flex align-items-center order-1 order-md-2"]],null,null,null,null,null)),(l()(),u.Na(49,0,null,null,3,"div",[["class","w-100 justify-content-center d-flex"]],null,null,null,null,null)),(l()(),u.Na(50,0,null,null,2,"div",[["class","debug"],["id","output"],["ng-style","styleOut"]],null,null,null,null,null)),(l()(),u.Ea(16777216,null,null,1,null,y)),u.Ma(52,278528,null,0,a.i,[u.M,u.J,u.q],{ngForOf:[0,"ngForOf"]},null),(l()(),u.Na(53,0,null,null,1,"footer",[["class","py-3 text-center"]],null,null,null,null,null)),(l()(),u.ab(-1,null,[" Soy footer :3\n"]))],function(l,n){var t=n.component;l(n,21,0,t.nombreSprite),l(n,31,0,t.spritePerRow),l(n,52,0,t.imagesFiles)},function(l,n){l(n,18,0,u.Pa(1,"",n.component.nombreSprite,""),u.Wa(n,23).ngClassUntouched,u.Wa(n,23).ngClassTouched,u.Wa(n,23).ngClassPristine,u.Wa(n,23).ngClassDirty,u.Wa(n,23).ngClassValid,u.Wa(n,23).ngClassInvalid,u.Wa(n,23).ngClassPending),l(n,27,0,u.Wa(n,33).ngClassUntouched,u.Wa(n,33).ngClassTouched,u.Wa(n,33).ngClassPristine,u.Wa(n,33).ngClassDirty,u.Wa(n,33).ngClassValid,u.Wa(n,33).ngClassInvalid,u.Wa(n,33).ngClassPending)})}var C=u.Ja("app-editor",d,function(l){return u.bb(0,[(l()(),u.Na(0,0,null,null,1,"app-editor",[],null,null,null,S,b)),u.Ma(1,114688,null,0,d,[r.a,c,m.b,h.k,f.a,u.k],null,null)],function(l,n){l(n,1,0)},null)},{},{},[]),P=function(){};t.d(n,"EditorModuleNgFactory",function(){return M});var M=u.Ka(e,[],function(l){return u.Ua([u.Va(512,u.j,u.Z,[[8,[o.a,C]],[3,u.j],u.v]),u.Va(4608,a.k,a.j,[u.s,[2,a.r]]),u.Va(4608,i.j,i.j,[]),u.Va(4608,m.b,m.b,[]),u.Va(4608,m.c,m.c,[]),u.Va(4608,m.a,m.a,[]),u.Va(4608,m.d,m.d,[]),u.Va(1073742336,a.b,a.b,[]),u.Va(1073742336,h.l,h.l,[[2,h.r],[2,h.k]]),u.Va(1073742336,P,P,[]),u.Va(1073742336,i.h,i.h,[]),u.Va(1073742336,i.c,i.c,[]),u.Va(1073742336,m.e,m.e,[]),u.Va(1073742336,e,e,[]),u.Va(1024,h.i,function(){return[[{path:"",component:d}]]},[])])})}}]);